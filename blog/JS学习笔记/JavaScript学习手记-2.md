# 作用域链（scope chain）————JS的学习笔记2
- 作用域
- 执行环境
- 变量对象
- 作用域链

## 作用域
---
简单来说，***作用域是函数和变量可访问的范围***。JS中的作用域是与函数紧密相关的，分为全局作用域和局部作用域。
- 全局作用域    
没有声明直接赋值的变量或是在最外层函数外声明的变量具有全局作用域。
- 局部作用域
在函数内声明的变量的作用域为创建变量的函数及其子函数。
## 执行环境 (Execution Context)
----
函数都有与其相关的作用域和执行环境。作用域与函数调用时变量的访问有关，而执行环境总是this的值，是调用函数时对象的引用。因此可以抽象理解执行环境为object。
- 执行环境主要有三个属性：变量对象(variable object)，this指针(this value)，作用域链(scope chain)
- 执行环境是一个用后即毁的东西。
    1. 每个函数都有自己的执行环境，当函数执行完毕时执行环境就被销毁，
    2. 全局执行环境是最外围的一个执行环境，全局的执行环境在应用程序退出（浏览器关闭）才会被销毁。   
## 变量对象 (Variable Object)
----
每个执行环境都有一个与之关联的变量对象，执行环境中定义的所有变量和函数都会保存在这个对象中，解析器在处理数据的时候就会访问这个内部对象。
- 变量对象包含：  
  1. 函数形参  
  2. 声明变量  
  3. 函数声明  
- 全局对象与活动对象
 当进入函数的执行环境时，解析器访问活动对象而非全局对象。活动对象不仅包含变量和函数声明外，还包含了特殊对象arguments。      

## 作用域链
-----
作用域链是一个链表，它决定了执行环境可访问变量及函数的*范围*和*先后次序*。
- 作用域链的次序
1. 在函数创建时，它的作用域链首先填入的是全局变量
![](https://ws1.sinaimg.cn/large/eac6ae9dgy1fom1spytwaj20hk06pjt0.jpg)
2. 当函数执行时进入函数执行环境，作用域链的第一个对象变成了函数的活动对象，第二个是包含环境，再下一个是包含环境的包含环境。。。。  
![](https://ws1.sinaimg.cn/large/eac6ae9dgy1fom1sq89nmj20hp0bt77l.jpg)
函数中对标识符（或者说变量和函数声明）的解析就沿着作用域链层层搜索，直至找到同名标识符为止，找不到返回undefined。
